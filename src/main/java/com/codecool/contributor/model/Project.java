package com.codecool.contributor.model;

import com.fasterxml.jackson.annotation.JsonIgnoreProperties;
import lombok.*;

import javax.persistence.*;
import java.util.List;
import java.util.Set;


@Data
@NoArgsConstructor
@AllArgsConstructor
@Builder
@Entity
public class Project {

    public enum Status {
        OPEN, INPROGRESS, CLOSED
    }

    @Id
    @GeneratedValue
    protected Integer id;

    @Column(nullable = false)
    protected String title;

    @Column(nullable = false, columnDefinition = "TEXT")
    protected String description;

    @Column(nullable = false, columnDefinition = "TEXT")
    private String shortDesc;

    @Column(nullable = false)
    private String organisation;

    @Column(nullable = false, columnDefinition = "TEXT")
    private String requirements;

    @Builder.Default
    private Integer viewCounter = 0;

    @ElementCollection
    @Singular
    private List<String> tags;

    @Enumerated(EnumType.STRING)
    @Builder.Default
    private Status status = Status.OPEN;

    @Builder.Default
    @Column(columnDefinition = "TEXT")
    private String image = "data:image/png;base64,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;";

    @ManyToOne
    @JsonIgnoreProperties({"contributions", "projects"})
    private User projectOwner;

    @ManyToMany
    @EqualsAndHashCode.Exclude
    @ToString.Exclude
    @JsonIgnoreProperties({"contributions", "projects"})
    @Singular
    private List<User> contributors;

    public boolean tagsContainCompareTag(List<String> compareTags) {
        for (String compareTag : compareTags) {
            if (this.tags.contains(compareTag))
                return true;
        }
        return false;
    }
}
